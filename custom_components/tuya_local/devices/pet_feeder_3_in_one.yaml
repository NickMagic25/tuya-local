name: Pet feeder with 3 bowls
products:
  - id: avejovp9ys7edcbf
    name: "志逸鸿3盘喂食器WIFI款"
    manufacturer: "Vacqueen"
entities:
  - entity: button
    name: Manual feed
    category: config
    icon: "mdi:food-drumstick"
    dps:
# Sends 1 serving to each bowl (0x01 0x01 0x01).
      - id: 101
        type: base64
        name: button
        persist: false
        mapping:
          - dps_val: AQEB
            value: true
  - entity: text
    name: Meal plan
    category: config
    hidden: true
    dps:
  # meal plan is in base64 hex in the following format: [day][hour][minute][bowl1 servings][bowl2 servings][bowl3 servings][enable][padding]
  # ex: 7f08000303030100 feeds every day at 8:00, 3 servings from each bowl, enabled, padding
      - id: 102
        type: base64
        name: value
        optional: true
  - entity: sensor
    name: Battery
    class: battery
    category: diagnostic
    dps:
      - id: 10
        name: sensor
        type: integer
        unit: "%"
  - entity: binary_sensor
    name: Feed error
    class: problem
    category: diagnostic
    dps:
      # Checks the reserved bytes in the feed report; any non-zero value is treated as an error.
      - id: 103
        type: base64
        name: sensor
        mask: 000000000000ffffff  # last 3 bytes
        optional: true
        mapping:
          - dps_val: null
            value: false
          - dps_val: 0
            value: false
          - value: true
